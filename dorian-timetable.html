<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dorian‚Äôs Timetable</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: var(--bg);
      color: var(--text);
      transition: background 0.3s, color 0.3s;
    }

    :root {
      --bg: #ffffff;
      --text: #222222;
      --card: #f2f2f2;
    }
    body.dark {
      --bg: #181818;
      --text: #f5f5f5;
      --card: #282828;
    }

    header {
      padding: 1rem;
      background: var(--card);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.5rem;
    }

    .controls {
      display: flex;
      gap: 1rem;
      margin-top: 0.5rem;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
    }
    th, td {
      border: 1px solid #999;
      text-align: center;
      padding: 1rem;
      position: relative;
    }
    th {
      background: var(--card);
    }

    td span {
      cursor: pointer;
      display: inline-block;
      position: relative;
    }

    td span::after {
      content: attr(data-fullname);
      position: absolute;
      bottom: 120%;
      left: 50%;
      transform: translateX(-50%);
      background: var(--card);
      color: var(--text);
      padding: 4px 8px;
      border-radius: 6px;
      font-size: 0.8rem;
      white-space: nowrap;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.2s;
    }
    td span:hover::after, td span:active::after {
      opacity: 1;
    }
  </style>
</head>
<body>
  <header>
    <h1 id="pageTitle">Dorian‚Äôs Timetable</h1>
    <div id="todayInfo"></div>
    <div class="controls">
      <button onclick="toggleTheme()">üåô/‚òÄÔ∏è</button>
      <select id="langSelect" onchange="changeLang(this.value)">
        <option value="en">English</option>
        <option value="bs">Bosanski</option>
        <option value="tr">T√ºrk√ße</option>
      </select>
    </div>
  </header>

  <main>
    <table id="timetable"></table>
  </main>

  <script>
    const subjectFullNames = {
      ENG: { en: "English Language", bs: "Engleski jezik", tr: "ƒ∞ngilizce" },
      BHS: { en: "BHS Language and Literature", bs: "BHS Jezik i knji≈æevnost", tr: "BHS Dili ve Edebiyatƒ±" },
      MO: { en: "My Environment", bs: "Moja okolina", tr: "√áevrem" },
      MAT: { en: "Mathematics", bs: "Matematika", tr: "Matematik" },
      MSC: { en: "Music Culture", bs: "Muziƒçka/Glazbena kultura", tr: "M√ºzik K√ºlt√ºr√º" },
      LK: { en: "Art", bs: "Likovna kultura", tr: "Resim Sanatƒ±" },
      DKR: { en: "Society/Culture/Religion", bs: "Dru≈°tvo/Kultura/Religija", tr: "Toplum/K√ºlt√ºr/Din" },
      TZO: { en: "Physical & Health Education", bs: "Tjelesni i zdravstveni odgoj", tr: "Beden Eƒüitimi ve Saƒülƒ±k" },
      INFO: { en: "Informatics", bs: "Informatika", tr: "Bili≈üim" }
    };

    const timetableData = {
      morning: {
        Monday: ['ENG', 'BHS', 'MSC', 'MAT'],
        Tuesday: ['TZO', 'DKR', 'BHS', 'MO'],
        Wednesday: ['MAT', 'INFO', 'MO', 'ENG'],
        Thursday: ['LK', 'BHS', 'TZO', 'MSC'],
        Friday: ['BHS', 'MAT', 'LK']
      },
      afternoon: {
        Monday: ['ENG', 'BHS', 'MSC', 'MAT'],
        Tuesday: ['TZO', 'DKR', 'BHS', 'MO'],
        Wednesday: ['MAT', 'INFO', 'MO', 'ENG'],
        Thursday: ['LK', 'BHS', 'TZO', 'MSC'],
        Friday: ['BHS', 'MAT', 'LK']
      }
    };

    const shiftTimes = {
      morning: { default: "08:00 ‚Äì 11:30", friday: "08:00 ‚Äì 10:40" },
      afternoon: { default: "14:00 ‚Äì 17:30", friday: "14:00 ‚Äì 16:40" }
    };

    let currentLang = "en";

    function isEvenWeek(date) {
      const oneJan = new Date(date.getFullYear(),0,1);
      const numberOfDays = Math.floor((date - oneJan) / (24 * 60 * 60 * 1000));
      return Math.floor(numberOfDays / 7) % 2 === 0;
    }

    function getCurrentShift(date) {
      return isEvenWeek(date) ? "morning" : "afternoon";
    }

    function renderTable(shift) {
      const days = ["Monday","Tuesday","Wednesday","Thursday","Friday"];
      let html = "<tr><th></th>";
      days.forEach(d => html += `<th>${translateDay(d)}</th>`);
      html += "</tr>";

      const maxPeriods = Math.max(...days.map(d => timetableData[shift][d].length));
      for (let p=0; p<maxPeriods; p++) {
        html += "<tr><td></td>";
        days.forEach(day => {
          const subj = timetableData[shift][day][p] || "";
          if (subj) {
            html += `<td><span data-fullname="${subjectFullNames[subj][currentLang]}">${subj}</span></td>`;
          } else {
            html += "<td></td>";
          }
        });
        html += "</tr>";
      }
      document.getElementById("timetable").innerHTML = html;
    }

    function updateHeader(date, shift) {
      const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
      const todayStr = date.toLocaleDateString(currentLang === "bs" ? "bs" : currentLang === "tr" ? "tr" : "en-GB", options);

      const todayDay = date.toLocaleDateString("en-GB", { weekday: "long" });
      const times = (todayDay === "Friday") ? shiftTimes[shift].friday : shiftTimes[shift].default;

      const text = {
        en: `Today: ${todayStr} | Shift: ${shift === "morning" ? "Morning" : "Afternoon"} | Lessons: ${times}`,
        bs: `Danas: ${todayStr} | Smjena: ${shift === "morning" ? "Prva (jutarnja)" : "Druga (popodnevna)"} | ƒåasovi: ${times}`,
        tr: `Bug√ºn: ${todayStr} | Vardiya: ${shift === "morning" ? "Sabah" : "√ñƒüleden Sonra"} | Dersler: ${times}`
      };

      document.getElementById("todayInfo").innerText = text[currentLang];
    }

    function translateDay(day) {
      const translations = {
        en: {Monday:"Monday",Tuesday:"Tuesday",Wednesday:"Wednesday",Thursday:"Thursday",Friday:"Friday"},
        bs: {Monday:"Ponedjeljak",Tuesday:"Utorak",Wednesday:"Srijeda",Thursday:"ƒåetvrtak",Friday:"Petak"},
        tr: {Monday:"Pazartesi",Tuesday:"Salƒ±",Wednesday:"√áar≈üamba",Thursday:"Per≈üembe",Friday:"Cuma"}
      };
      return translations[currentLang][day];
    }

    function changeLang(lang) {
      currentLang = lang;
      const today = new Date();
      const shift = getCurrentShift(today);
      renderTable(shift);
      updateHeader(today, shift);
    }

    function toggleTheme() {
      document.body.classList.toggle("dark");
    }

    // Init
    const today = new Date();
    const shift = getCurrentShift(today);
    renderTable(shift);
    updateHeader(today, shift);
  </script>
</body>
</html>
